---
title: "ConsumerComplaints_InitialAnalysis"
author: "Izzy Angeli"
date: "5/3/2022"
output: html_document

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
library(janitor)
library(readxl)
library(writexl)
library(ggplot2)

data <- readRDS("complaints.rds")

```

## Consumer Complaints Mini-Project

First, I'll be looking to see the category with the most complaints. 


```{r cars}

data %>% 
  count(product, sort = TRUE)

```

## What complaint category has the biggest increase?

```{r pressure, echo=FALSE}

product_count_monthly <-
data %>% 
  count(product, mm_yy_received)

product_count_monthly <- product_count_monthly %>% 
  mutate(product= str_replace(product, "Credit reporting, credit repair services, or other personal consumer reports", "Credit reports and repairs"),product= str_replace(product, "Money transfer, virtual currency, or money service" , "Money services"), product= str_replace(product, "Payday loan, title loan, or personal loan", "Payday, title, personal loans")) 
  

```

## Lets make a line graph for the table above

```{r}

product_count_monthly %>%
  ggplot(aes(x = mm_yy_received, y = n, group=product, color=product)) +
  geom_line() + theme(axis.text.x = element_text(angle = 90))

```


## What product was most commonly reported? 

```{r}

ggplot(product_count_monthly, aes(x=product, y=n, fill=product)) +
  geom_col() + scale_fill_manual(values=c ("red", "pink", "orange", "yellow", "pink", "orange", "green", "blue" , "purple")) + theme(axis.text.x = element_text(angle = 90))


```


## What state did most complaints come from? 
```{r}

data %>% 
  count(state, sort = TRUE)


```

